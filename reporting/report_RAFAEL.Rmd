---
title: "Analisi congiunta di dati di traffico (Floating Car Data - FCD) e sua associazione con la rete stradale nella provincia di Catania"
author:
- Federico Karagulian
date: "ultima versione `r format(Sys.time(), '%d %B %Y, %H:%M')`"
output:
  html_document: default
  pdf_document: default
  word_document: 
    reference_docx: word_style_FK.docx
  number_sections: true
  bookdown::word_document: default
---

## 1. Obbiettivi del presente lavoro

Lo scopo principale del seguente lavoro e' un modello previsionale della viabilita' nella provincia di Catania. Tale modello deve essere in grado di quantificare l'intensita' del traffico stradale in funzione di diversi scenari che possono conivolgere la viabilita' di una parte della rete stradale. A scopo di esempio potremmo pensare a come il traffico stradale potrebbe essere ridistribuito se un determinato tratto stradale fosse interrotto. Quali altri tratti stradali verrebbero usati dagli automobilisti? e con quali criteri? (tempo minore? percorso piu' breve?).  
Un'analisi della **vulnerabilita'** della rete potrebbe aiutare a capire come la rete stessa, caratterizzata dal suo tipico traffico veicolare, reagirebbe a diversi **scenari** che vedono un'alterazione della viabilita'.

Al fine di procedere con un'analisi della vulnerabilita' della rete stradale di Catania, abbiamo utilizzato due tipoligie di dati:

a) dati della rete stradale
b) dati di veicoli su strada (FCD Viasat data)

Questi dati sono stati eleaborati sia separatamente, sia in modo congiunto per ottenere risultati seguenti:

1) Identificazione delle diverse **tipologie di strade** presenti nella rete stradale della provincia di Catania. Vista lo scopo del lavoro, abbiamo scelto di analizzare tutti i tipi di strade legate alla viabilita' veicolare piuttosto che a quella ciclabile e pedonale.
2) Analisi della rete stradale per caraterizzare la **centralita'** dei tratti stradali.
3) Associazione delle posizioni GPS degli autoveicoli (FCD data) a percorsi su strada. Per quanto possibile, sono stati indentificati gli archi consecutivi percorsi da ogni veicolo su strada (**map-matching**). Non sempre e' stato possibile *mappare* tragitti completi. Si e' quindi proceduto a elaborare tutti quei tragitti che hanno avuto una corrispondenza, anche paziale con una sucessione consecutiva di archi.
4) Nella fase di post-processing dei dati di *map-matching*, si sono individuati tutti gli archi possibili, percorsi da un numero consistente di veicoli. A questi archi e' stata associata una tipica **distanza di viaggio**, una **velocita' di viaggio** ed un **tempo di viaggio**. E' stata determinata la **frequenza** con cui gli archi sono percorsi dai veicoli. Questi analisi ha permesso di individuare quali sono le strade ad alto e basso flusso di traffico. Questo risultato (ottenuto con dati reali) e' stato paragnato alla *centralita'* degli archi ottenuta con i dati statici della rete stradale.  
5) Analisi di vulnerabilita'



```{r Tabella 1, echo = FALSE, warning = FALSE, cache = FALSE, out.width = "70%", results = 'asis', message = FALSE, comment=FALSE}


rm(list = ls())

library(ggplot2)
library(stringr)
library(tidyr)
library(readr)
library(broom)
library(threadr)
library(dplyr)
library(dygraphs)
library(ggpmisc)
library(plotly)
library(GGally)
library(htmlwidgets)
library(htmltools)
library(webshot)
library(ggrepel)
library(openair)
library(widgetframe)
library(geojson)
library(geojsonio)
library(mapview)
library(pander)
options(scipen=5)


# saving the original graphical parameters
op <- par(no.readonly = TRUE)


# load edges data
CT_edges <- read.csv("C:/ENEA_CAS_WORK/Catania_RAFAEL/postprocessing/Catania_edges_60km.csv", header = T)
VIASAT_data <- read_csv("C:/ENEA_CAS_WORK/Catania_RAFAEL/reporting/VIASAT_data_row.csv")[-1]
counts_VIASAT <- read.csv("C:/ENEA_CAS_WORK/Catania_RAFAEL/reporting/COUNTS_VIASAT_data.csv", header = T)[-1]

edges_stats <- CT_edges %>%
  group_by(highway) %>%
  summarize(sum = length(highway),
            length = sum(length/1000))  # km

edges_stats <- edges_stats[!grepl(",", edges_stats$highway),]
edges_stats$sum = round(edges_stats$sum, digits = 0)
edges_stats$length = round(edges_stats$length, digits = 0)

# get the sum off all road by type
# get sum of all lenghts from all road (total lenght of the entire network)
max_records <- edges_stats %>%
  summarise(max_sum = sum(sum),
            max_length = sum(length))
  
# normalize all records (sum and length) to the maximum lenght and sum of road
edges_stats$sum_norm <- round(((edges_stats$sum)/(max_records$max_sum))*100, digits=1)
edges_stats$length_norm <- round(((edges_stats$length)/(max_records$max_length))*100, digits = 1)

names(edges_stats) <- c("tipologia strada",  "numero totale di strade", "lunghezza (km)", "frazione strade(%)", "frazione lunghezza strade(%)")


Caption <- paste0("**Tabella 1.** Classificazione delle strade presenti nella provincia di Catania su un'estensione di 60 km.")
set.caption(Caption)
panderOptions("table.emphasize.rownames", FALSE) # remove row.names from the table
panderOptions("table.split.table", Inf) # to avoid to split tables if rows are too long
panderOptions('table.alignment.default', function(df) ifelse(sapply(df, is.numeric), 'right', 'left')) # right alignment for numeric, left otherwise
pander(edges_stats, emphasize.strong.cols = 1, missing = "")

# transpose data
edges_stats <- as.data.frame(edges_stats)
edges_stats_raw <- gather(edges_stats[1:3], "stats", "records", 2:3)

# create columns for normalizd records (in percentage)
edges_stats_norm <- gather(cbind(edges_stats[1], edges_stats[4:5]), "stats", "norm_records", 2:3)
edges_stats_raw$norm_records = edges_stats_norm$norm_records
edges_stats_raw$stats <- as.factor(edges_stats_raw$stats)
levels(edges_stats_raw$stats) <- gsub("length","lunghezza (km)", levels(edges_stats_raw$stats))
levels(edges_stats_raw$stats) <- gsub("sum","numero totale di strade per categoria", levels(edges_stats_raw$stats))


```



## 2. Rete stradale per la provincia di Catania

Le reti stradali si possono ottenere attraverso il progetto colloaboratiovo di OpenStreetMap (OSM). Questo progetto e' stato finalizzato allo scopo di creare mappe in tutto il mondo a contenuto libero. I dati geografici raccolti nell'ambito di questo progetto, permetted di potere avere accesso in qualsiasi momento a mappe di sull'intero territorio. Questi dati sono forninti su base volontaria, quindi le strade che vengono mappate in OpenStreetMap possono essere modificate da qualunque persona. 
La caratteristica di OpenStreetMap, e' quella di fornire delle mappe stradali con informazioni importanti come quelle indicate di seguito:

1. il codice identificativo di ogni tratto stradale (**osmid**)
2. l'inizio e la fine di un tratto tradale (**arco**), i cui punti estremi **u** e **v** si sono identificati come **nodi**.
3. il senso di marcia di una strada (**oneway**).
4. il nome della strada (**name**) (puo' essere una via, piazza)
5. la sigla identificativa di una strada (*ref*) (nel caso di strade provinciali, regionali, statali, autostrade, ecc.)
6. la lunghezza dell'arco (*length*)
7. le coordinate geografiche per georeferenziare l'arco (*geometry*)
8. il numero di corsie su un arco (*lanes*)
9. la velocita' massima consentita sull'arco stradale (*maxspeed*)
10. la presenza di rotatorie (*junction*), *tunnel*, e ponti (*bridges*)
11. il tipo di strada che e' riportato come categoria del campo *highway*. Ci sono diverse categorie di strade che vanno a coprire le zone urbane, residenziali, pedonali, ciclabili e, a scorrimento veloce. Tutte queste categorie vengo identificate con i seguenti nomi: **unclassified, residential, tertiary, secondary, primary, trunk, trunk_link, living_street, tertiary_link, secondary_link, motorway_link, motorway, trunk, abandoned, footway, pedestrian, raceway, cycleway, steps, construction, bus_guideway, bridleway, corridor, escape, rest_area, track, sidewalk, proposed, path**.
Tuttavia, per l'analisi congiunta delle informazioni da Open Street Map e per i dati FCD, sono state solo considerate le strade percorse da veicoli (*driving*).

Le informazioni di OpenStreetMap sopra elencate, sono periodicamente aggiornate dagli enti che si occupano di reti stradali. Tuttavia, e' importante notare che ci potrebbero omissioni ed incongruenze tra la rete stradale reale e quella riportata da OpenStreetMap. 

La rete stradale che copre l'intera provicia di Catania e' stata quindi ottenuta interrogando il database di OpenStreetMap intorno ad una raggio di 60 Km dal sal capoluogo di Catania in Sicilia. La rete comprende miglia strade e quindi il dataset ottenuta ha delle dimensioni considerevolmente grandi. 
Per ovviare a problemi di spazio e per garantire un fluida visualizazzione online della rete stradale e dei risultati ottenuti dal confronto con i dati geolocalizzati Viasat, e' stata riportata solo una parte della rete.
**Figura 1** riporta un grafico riassiuntivo delle principali strade presenti nella provincia di Catania. La lunghezza totale (in Km) ed il numero totale di strade, per tipologia, e' stato riportato assieme alla loro percentuale relativa al numero ed alla lunghezza totale totale di strade.

Come si puo' vedere da Figura 1, il numero piu' grande di strade riguarda quelle *residenziali*, seguite da quelle, *terziare*, *secondarie* e *primarie*. Come si vede c'e' anche un numero consistente di strade *non classificate* la cui lunghezza totale raggiunge circa il 27% della lunghezza totale di tutte le strade.



````{r, message = FALSE, echo = FALSE, warning = FALSE, fig.width=9,fig.height=5,  fig.cap ="**Figura 1.** Ripartizione delle categorie di strade nelle provincia di Catania per un raggio di 60 km attorno al suo capoluogo. I numeri riportati all'interno indicano la percentuale relative al numero ed alla lunghezza totale totale di strade."}

################################
### summary stats by hour ######
################################

p <- ggplot(data = edges_stats_raw,
              aes(`tipologia strada`, records, fill = `tipologia strada`)) + guides(fill=FALSE) +
    geom_bar(stat = "identity") +
    facet_wrap( ~ stats, ncol = 4, scales = "free_y") +
    # facet_grid(stats ~ .) +
    # facet_grid(corsia ~ classi, scales = "free", space = "free") +
    guides(fill=FALSE) +
    # ylim(0, 1100000) +
    theme_bw() +
    theme( strip.text = element_text(size = 12)) +
    theme(axis.text.x=element_text(angle=0,hjust=1,vjust=0.5)) +
    theme(axis.text.x=element_text(size=11,face="bold", colour = "black")) +
    theme(axis.title.x = element_blank()) +                  # Remove x-axis label
    ylab("") +            # Set y-axis label
    theme(axis.title.y = element_text(face="bold", colour="black", size=10),
          axis.text.y  = element_text(angle=0, vjust=0.5, size=9)) +
    xlab("") +            # Set y-axis label
    theme(axis.title.x = element_text(face="bold", colour="black", size=12),
          axis.text.x  = element_text(angle=45, vjust=1, size=9)) +  
     geom_text_repel(aes(label = paste(norm_records, sep = "")), size = 4, hjust = 0.5, col = "black",  vjust = 1) +
    ggtitle("Ripartizione delle categorie di strade nella provincia di Catania") + 
    theme(plot.title = element_text(lineheight=.8, face="bold"))
  p
  

```

*<br/><br/>*

**Figura 2** riporta un rappresentazione grafica di una porzione della rete stradale della provincia di Catania. E' possible vedere tutti i nodi che collegano gli archi della rete. Gli archi (strade) sono stati riportati con colori diversi per mostrare la diversa tipologia di strade come sopra descritto. Le strade **secondarie** sono state indicate con il colore **rosso**, quelle **primarie** con il colore **verde**, quelle **terziarie** con il colore **blue**, i **raccordi autostradali** di colore **giallo** le **autostrade** di colore **nero**.  Infine, le **superstade**, le strade **residenziali**,  **non classificate**, i link **terziari e secondary** e le strade di **servizio**, sono state indicate di colore **arancione**.


```{r, echo=FALSE, fig.cap="**Figura 2**. Porzione della rete stradale della provincia di Catania ottenuta dai dai dati Open Street Map.",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")

```

<style>iframe{height: 600px;width: 500px}</style>
<iframe src="2507530_VIASAT_partial_2019-04-15.html"></iframe>


**Problemi rilevati su OSM per la provincia di Catania:**

Durante la fase di associazione di archi con dati Viasat, sono stati rilevate diverse incogruenze nella rete stradale ottenuta da OpenStreetMap. Queste incongruenze sono probabilmente imputabili ad un mancato aggiornamento del database di OpenStreetMap con lo stato reale della rete stradale.
Di seguito elenchiamo alcuni di questi problemi:

1.  strade troncate. Spesso si vedono strade che non hanno una continuta'. Piu' precisamente, quando si valuta il percorso di un veicolo (da dati Viasat), si verifica che un nodo non e' connesso al nodo sucessivo che a sua volta potrebbe essere attraversato da un arco su cui si trova un dato FCD. Questo crea una discontinuita' nella rete stradale ed anche nella riscostruzione corretta del percorso di un veicolo.

2. Spesso si nota che la geo-localizazzione di alcuni dati FCD e' situata o sull'estremita' di archi o leggermente al di fuori della traettoria di un arco. Questo si verifica sia su dati aventi un'ottima accuratezza e sia su dati che sono consecutivi uno all'altro lungo un percorso che comprende piu' archi.



```{r, echo = FALSE, warning = FALSE, cache = FALSE, out.width = "70%", results = 'asis', message = FALSE, comment=FALSE}

VIASAT_data_select <- VIASAT_data %>%
  select (-id,
          - geom,
          - distance,
          - dates,
          - new_dates)

DAYS_VIASAT_data <- VIASAT_data_select %>%
  mutate(DATE = date(timedate)) %>%
  group_by(DATE) %>%
  summarise(sum_progressive = sum(progressive)/1000)

DAYS_VIASAT_data <- DAYS_VIASAT_data %>%
  filter(sum_progressive > 10000)

# get a distributions of speed
filter <- DAYS_VIASAT_data$DATE

Caption <- paste0("**Tabella 2.** Attributi dei dati geolocalizzati ottenuti da Viasat.")
set.caption(Caption)
panderOptions("table.emphasize.rownames", FALSE) # remove row.names from the table
panderOptions("table.split.table", Inf) # to avoid to split tables if rows are too long
panderOptions('table.alignment.default', function(df) ifelse(sapply(df, is.numeric), 'right', 'left')) # right alignment for numeric, left otherwise
pander(head(VIASAT_data_select), emphasize.strong.cols = 1, missing = "")

```



## 2. Dati FCD Viasat 

Un campione di **`r length(VIASAT_data)`** di dati Viasat  (*floating car data*) e' stato analizzato per fare un'associazioe tra le posizioni registrate da ogni veicolo e la rete stradale di Catania.
Un'analisi preliminare dei dati Viasat, ha mostrato che la maggior parte dei chilometri percorsi dai veicoli era  principalmente distribuito su **`r nrow(DAYS_VIASAT_data)`** giorni:**`r filter`** (vedi **Figura 2**).   

La struttura principale dei dati Viasat e' riportata in **Tabella 2**. Come di puo' vedere, dati sono caratterizzati dalla presenza di un identificativo anonimo del vicolo **ideterm**, di un *orario* (**timedate**),  della distanza progressiva percorsa da ogni veicolo (**progressive**), dal un segnale *on/off* (**panel**) che indica se il motore e' acceso o spento. Infine, viene anche riportata l'*accuratezza* del dato GPS (**grade**) il cui valore varia da 1 (piu' accurato) a 50 (meno accurato). 

*<br/><br/>*

````{r, message = FALSE, echo = FALSE, warning = FALSE, fig.width=10,fig.height=6,  fig.cap ="**Figura 2.** Distribuzione dei chilometri percorsi dai veicoli per giorno di geolocalizzazione nella provincia di Catania. Le linee tratteggiate sono riferite ad un valore di circa 4000 e 8000 km, rispettivamente"}

VIASAT_data_filtered <- VIASAT_data %>%
  mutate(DATE = date(timedate)) %>%
  filter(DATE %in% c(filter))

p <- VIASAT_data_filtered %>%
  ggplot(aes( (progressive), fill = as.factor(DATE))) + 
  geom_density(alpha = 0.5) +
  scale_x_continuous(trans='log10') +
  guides(fill=guide_legend(title="Date")) +
  theme_bw() +
  theme(axis.title.x = element_text(face="bold", colour="black", size=13),     
        axis.text.x=element_text(angle=0,hjust=0,vjust=1, size=14)) +
  # theme(axis.text.x=element_text(size=14,face="bold", colour = "black")) +
  ylab("densita' (unita' arbitrarie)") +
  xlab("kilometri percorsi") +
  theme(axis.title.y = element_text(face="bold", colour="black", size=13),
        axis.text.y  = element_text(angle=0, vjust=0.5, size=13, colour="black")) +
  geom_vline(xintercept=4000, color="red", linetype="dashed", size=0.5) +
   geom_vline(xintercept=8000, color="red", linetype="dashed", size=0.5) +
  ggtitle("Distribuzione dei chilometri percorsi dai veicoli per giorno di geolocalizzazione") +
  theme(plot.title = element_text(lineheight=.8, face="bold", size = 13))
p



```

*<br/><br/>*

````{r, message = FALSE, echo = FALSE, warning = FALSE, fig.width=10,fig.height=6,  fig.cap ="**Figura 3.** Distribuzione del numero di geolocalizazzioni giornaliere per veicoli circolanti nella provincia di Catania. La linea tratteggiata e' riferita ad un valore di circa 40 km/h"}


p <- VIASAT_data_filtered %>%
  ggplot(aes( (speed), fill = as.factor(DATE))) + 
  geom_density(alpha = 0.5) +
  scale_x_continuous(trans='log10') +
  guides(fill=guide_legend(title="Date")) +
  theme_bw() +
  theme(axis.title.x = element_text(face="bold", colour="black", size=13),     
        axis.text.x=element_text(angle=0,hjust=0,vjust=1, size=14)) +
  # theme(axis.text.x=element_text(size=14,face="bold", colour = "black")) +
  ylab("densita' (unita' arbitrarie)") +
  xlab("velocita' (km/h)") +
  theme(axis.title.y = element_text(face="bold", colour="black", size=13),
        axis.text.y  = element_text(angle=0, vjust=0.5, size=13, colour="black")) +
  geom_vline(xintercept=37, color="red", linetype="dashed", size=0.5) +
  ggtitle("Distribuzione delle velocita' dei veicoli per giorno di geolocalizazzione") +
  theme(plot.title = element_text(lineheight=.8, face="bold", size = 13))
p



```


*<br/><br/>*


````{r, message = FALSE, echo = FALSE, warning = FALSE, fig.width=10,fig.height=6,  fig.cap ="**Figura 2.** Distribuzione del numero di geolocalizazzioni giornaliere per veicoli circolanti nella provincia di Catania."}

######################################
### Distribution of VIASAT data  #####
######################################


############################
#### density plot ##########
############################

# this are all date within 1 DAY interval of full data
counts_VIASAT <- counts_VIASAT %>%
  filter(date %in% c("2019-04-11", "2019-04-15", "2019-04-16"))

p <- counts_VIASAT %>%
  ggplot(aes( (count), fill = as.factor(date))) + 
  geom_density(alpha = 0.5) +
  scale_x_continuous(trans='log10') +
  # theme(legend.position = "none") +
  guides(fill=guide_legend(title="Date")) +
  theme_bw() +
  theme(axis.title.x = element_text(face="bold", colour="black", size=13),     
        axis.text.x=element_text(angle=0,hjust=0,vjust=1, size=14)) +
  # theme(axis.text.x=element_text(size=14,face="bold", colour = "black")) +
  ylab("densita' (unita' arbitrarie)") +
  xlab("numero di posizioni per ogni veicolo (records GPS)") +
  theme(axis.title.y = element_text(face="bold", colour="black", size=13),
        axis.text.y  = element_text(angle=0, vjust=0.5, size=13, colour="black")) +
  geom_vline(xintercept=80, color="red", linetype="dashed", size=0.5) +
  ggtitle("Distribuzione del numero delle posizioni di veicoli per giorno di geolocalizazzione") +
  theme(plot.title = element_text(lineheight=.8, face="bold", size = 13))
p


```


*<br/><br/>*

````{r Tabella 3, echo = FALSE, warning = FALSE, cache = FALSE, out.width = "70%", results = 'asis', message = FALSE, comment=FALSE}

# load map-matched data
all_EDGES_map_matching <- geojson_read("all_EDGES_2019-04-15_Apr-07-2020.geojson", what = "sp")
all_EDGES_map_matching = as.data.frame(all_EDGES_map_matching)
all_EDGES_map_matching <- apply(all_EDGES_map_matching,2,as.character)
write.csv(all_EDGES_map_matching, "all_EDGES_map_matching.csv")
all_EDGES_map_matching <- read.csv("all_EDGES_map_matching.csv", header = TRUE)[-1]

# sort by distance 
all_EDGES_map_matching <- all_EDGES_map_matching %>% 
# desc orders from largest to smallest
  arrange(desc(distance)) %>%
  select(- osmid,
         - service,
         - width,
         - access,
         - area,
         - key,
         - id,
         - junction,
         - bridge,
         - tunnel,
         - lanes)


# rename some columns
colnames(all_EDGES_map_matching)[which(colnames(all_EDGES_map_matching) == 'distance')] <- 'travelled distance (km)'
colnames(all_EDGES_map_matching)[which(colnames(all_EDGES_map_matching) == 'speed')] <- 'travelled speed (km/h)'
colnames(all_EDGES_map_matching)[which(colnames(all_EDGES_map_matching) == 'time')] <- 'travelled time (min)'


all_EDGES_map_matching_table <- all_EDGES_map_matching[1:10, ]
# map <- htmltools::includeHTML("matched_route_VIASAT_2019-04-16_Mar-30-2020.html")

all_EDGES_map_matching_table[all_EDGES_map_matching_table=="character(0)"]<- ""
# str(all_EDGES_map_matching_table)

# all attributes of EGDES
names_all_EDGES <- names(all_EDGES_map_matching)

Caption <- paste0("**Tabella 3.** Attributi della rete stradale OpenStreetMap associata alle traccie GPS (Viasat) di veicoli in movimento.")
set.caption(Caption)
panderOptions("table.emphasize.rownames", FALSE) # remove row.names from the table
panderOptions("table.split.table", Inf) # to avoid to split tables if rows are too long
panderOptions('table.alignment.default', function(df) ifelse(sapply(df, is.numeric), 'right', 'left')) # right alignment for numeric, left otherwise
pander(all_EDGES_map_matching_table, emphasize.strong.cols = 1, missing = "")

```


**`r names_all_EDGES`**


**Betweenness centrality**
E’ una misura che indica l’influenza di un nodo rispetto al flusso di traffico tra ogni paio di nodi (con il presupposto che I flussi di traffico  occorrano sui tragitti piu’ corti.
La “betweenness centrality” di ogni nodo puo’ essere riassunta come il numero di cammini piu’ corti che passano attraverso il nodo.


**Closeness centrality**
E’ una misura che indica la lunghezza media del cammino piu’ corto da un determinato nodo a tutti gli altri.
Il nodo con la “closeness centrality” piu’ grande, e’ il nodo piu’ vicino a tutti gli altri nodi


```{r, echo=FALSE, fig.cap="**Figura 4**. **Betweeness Centrality** di una porzione della rete stradale della provincia di Catania ottenuta dai dai dati Open Street Map.",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")
```

```{r, echo=FALSE, fig.cap="**Figura XXXX**. Centralita'.",out.width = '40%'}
knitr::include_graphics("colorbar_centrality.png")
```


<style>iframe{height: 600px;width: 500px; zoom: 1.5; -moz-transform: scale(1.5); -moz-transform-origin: 0 0}</style>
<iframe src="btw_centrality_Catania__Italy.html"></iframe>

*<br/><br/>*


```{r, echo=FALSE, fig.cap="**Figura 4a**. **Betweeness Centrality** di una porzione della rete stradale della provincia di Catania ottenuta dai dai dati Open Street Map.",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")
```

```{r, echo=FALSE, fig.cap="**Figura YYYYY**. Centralita'.",out.width = '40%'}
knitr::include_graphics("colorbar_centrality.png")
```

<style>iframe{height: 600px;width: 700px}</style>
<iframe src="close_centrality_Catania__Italy.html"></iframe>



```{r, echo=FALSE, fig.cap="**Figura 5**. Frequenza di percorrenza di ogni arco stradale nella provicnia di Catania. Il dato e' in percentuale relativa al numero massimo di percorrenze.(BIG DATASET)",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")

```


<style>iframe{height: 600px;width: 700px}</style>
<iframe src="clean_matched_route_frequecy_all_EDGES_10032020.html"></iframe>


```{r, echo=FALSE, fig.cap="**Figura 5a**. Frequenza di percorrenza di ogni arco stradale nella provicnia di Catania. Il dato e' in percentuale relativa al numero massimo di percorrenze.(SMALL DATASET)",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")

```

<style>iframe{height: 600px;width: 700px}</style>
<iframe src="clean_matched_route_frequecy_all_EDGES_2019-04-15_Apr-03-2020.html"></iframe>



```{r, echo=FALSE, fig.cap="**Figura 6**. Tempo medio di viaggio calcolato su ogni arco stradale nella provincia di Catania. (SMALL DATASET)",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")

```

<style>iframe{height: 600px;width: 700px}</style>
<iframe src="clean_matched_route_travel_time_all_EDGES_2019-04-15_Apr-03-2020.html"></iframe>


```{r, echo=FALSE, fig.cap="**Figura 7**. Velocitaà media di viaggio calcolata su ogni arco stradale nella provincia di Catania. (SMALL DATASET)",out.width = '0%'}
knitr::include_graphics("C:/ENEA_CAS_WORK/SENTINEL/ANAS/postazione_671 (A2, Km 5+004).png")

```

<style>iframe{height: 600px;width: 700px}</style>
<iframe src="clean_matched_route_travel_speed_all_EDGES_2019-04-15_Apr-03-2020.html"></iframe>


*<br/><br/>*


